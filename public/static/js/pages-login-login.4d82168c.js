(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"233e":function(t,i,e){"use strict";var o=e("3cb6"),a=e.n(o);a.a},"3cb6":function(t,i,e){var o=e("f60e");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=e("4f06").default;a("513e2014",o,!0,{sourceMap:!1,shadowMode:!1})},5649:function(t,i,e){"use strict";e.r(i);var o=e("70e4"),a=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(i,t,(function(){return o[t]}))}(n);i["default"]=a.a},"630a":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return o}));var o={tuiIcon:e("588b").default,tuiButton:e("7cec").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"tui-bg-box"},[e("v-uni-image",{staticClass:"tui-bg-img",attrs:{src:t.webURL+"/static/images/mall/my/img_bg_3x.png"}}),e("v-uni-image",{staticClass:"tui-photo",attrs:{src:"/static/images/my/mine_def_touxiang_3x.png"}}),e("v-uni-view",{staticClass:"tui-login-name"},[t._v(t._s(t.app_name))])],1),e("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.formLogin.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tui-login-from"},[e("v-uni-view",{staticClass:"tui-line-cell"},[e("tui-icon",{attrs:{name:"mobile",size:20,color:"#6d7a87"}}),e("v-uni-input",{staticClass:"tui-input",attrs:{"placeholder-class":"tui-phcolor",name:"mobile",placeholder:"请输入手机号码",maxlength:"11",type:"number"},model:{value:t.mobile,callback:function(i){t.mobile=i},expression:"mobile"}})],1),e("v-uni-view",{staticClass:"tui-line-cell tui-top28"},[e("tui-icon",{attrs:{name:"pwd",size:20,color:"#6d7a87"}}),e("v-uni-input",{staticClass:"tui-input",attrs:{"placeholder-class":"tui-phcolor",name:"smsCode",placeholder:"请输入验证码",maxlength:"6"}}),e("tui-button",{attrs:{width:"182rpx",height:"56rpx",size:24,type:t.type,shape:"circle",plain:!0,disabled:t.disabled},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.btnSend.apply(void 0,arguments)}}},[t._v(t._s(t.btnText))])],1),e("v-uni-button",{staticClass:"tui-button-primary tui-btn-submit",attrs:{"hover-class":"tui-button-hover","form-type":"submit"}},[t._v("登录")]),e("v-uni-view",{staticClass:"tui-protocol",attrs:{"hover-class":"opcity","hover-stay-time":150}},[t._v('点击"登录"即表示已同意'),e("v-uni-text",{staticClass:"tui-protocol-red",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.protocol(1)}}},[t._v("《用户协议》")]),t._v("与"),e("v-uni-text",{staticClass:"tui-protocol-red",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.protocol(2)}}},[t._v("《隐私协议》")])],1)],1)],1),e("page-back")],1)},n=[]},"70e4":function(t,i,e){"use strict";var o=e("4ea4");e("c975"),e("ac1f"),e("5319"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=o(e("5530")),n=e("26cb"),r=o(e("3da5")),l=o(e("f5c0")),s=e("b006"),u={data:function(){return{disabled:!1,btnText:"获取验证码",mobile:"",type:"primary",code:"",app_name:r.default.app_name,webURL:"https://www.thorui.cn/wx",target_url:null}},onLoad:function(t){this.target_url=t.target_url,null!=this.target_url&&"undefined"!=this.target_url||(this.target_url=window.location.href,this.target_url=this.target_url.replace("pages/login/login","pages/tabbar/my/my")),console.log(this.target_url)},methods:(0,a.default)((0,a.default)({},(0,n.mapMutations)(["login"])),{},{getRandom:function(t){var i="";t=t||6;for(var e=0;e<t;e++)i+=Math.floor(10*Math.random());return i},doLoop:function(t){var i=this;t=t||60,this.btnText=t+"s后获取";var e=setInterval((function(){t>0?(i.btnText=t+"s后获取",--t):(i.btnText="获取验证码",i.disabled=!1,i.type="primary",clearInterval(e))}),1e3)},btnSend:function(){var t=this,i=[{name:"mobile",rule:["required","isMobile"],msg:["请输入手机号码","请输入正确的手机号码"]}],e={mobile:this.mobile},o=l.default.validation(e,i);o?(console.log(this.http),this.utils.toast(o)):(0,s.getVerifyCode)({mobile:this.mobile}).then((function(i){var e=i.code;200==e?(t.utils.toast("获取验证码成功，请查收验证码短信！"),t.disabled=!0,t.btnText="请稍候...",t.type="gray",t.doLoop(60)):t.utils.toast("获取验证码失败，请重新获取！")}))},formLogin:function(t){var i=this,e=t.detail.value.smsCode,o=t.detail.value.mobile,a=[{name:"mobile",rule:["required","isMobile"],msg:["请输入手机号码","请输入正确的手机号码"]},{name:"loginCode",rule:["required"],msg:["请输入验证码","验证码不正确"]}],n=1;n=this.utils.isWeiXinWeb()?1:this.utils.isMobile()?2:3;var r={mobile:o,loginCode:e},u=l.default.validation(r,a);if(u)this.utils.toast(u);else{this.utils.formatNumber(o);(0,s.H5Login)({mobile:this.mobile,verify_code:e,target_url:this.target_url,source:n}).then((function(t){var e=t.code;if(200==e){var o=t.data,a=o.redirectUrl;o.redirectUrl=null,i.app_data.setToken(o.token),i.app_data.setUserInfo(o),null!=a&&""!=a?window.location.href=a:i.target_url.indexOf("pages/tabbar/my/my")>-1?uni.switchTab({url:"/pages/tabbar/my/my"}):history.back()}else i.utils.toast("登录失败，请重新登录！")}))}},protocol:function(t){console.log("11"),uni.navigateTo({url:"/pages/protocol/protocol?protocol_type="+t})},wxGetUserInfo:function(){var t=this;this.clog.log("wxGetUserInfo"),uni.getUserProfile({provider:"weixin",desc:"完善会员资料",success:function(i){uni.login({provider:"weixin",success:function(e){var o=e.code;t.clog.log("code = "+o),t.login(o,i);var a=i.userInfo.nickName,n=i.userInfo.avatarUrl;t.clog.log(i),t.clog.log("nickname = "+a),t.clog.log("avatarUrl = "+n)},fail:function(t){},complete:function(){}})},fail:function(t){},complete:function(){}})},login:function(t,i){var e=this,o=this;this.http.request({url:"WxMini/login",show_loading:!0,loading_msg:"登录中……",params:{code:t,loginData:i},success:function(t){o.clog.log("login success"),o.clog.log(t)},fail:function(t){e.utils.toast("登录失败，请重新登录！")}})}})};i.default=u},"913b":function(t,i,e){"use strict";e.r(i);var o=e("630a"),a=e("5649");for(var n in a)"default"!==n&&function(t){e.d(i,t,(function(){return a[t]}))}(n);e("233e");var r,l=e("f0c5"),s=Object(l["a"])(a["default"],o["b"],o["c"],!1,null,"51f6cfa8",null,!1,o["a"],r);i["default"]=s.exports},b006:function(t,i,e){"use strict";var o=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.loginXcx=r,i.H5Login=l,i.getVerifyCode=s,i.webLogin=u;var a=o(e("6ee2")),n=a.default.request;function r(t){return n({method:"POST",url:"User/loginXcx",isForm:!0,postData:t})}function l(t){return n({method:"POST",url:"/Api/Mobile/wx_login",isForm:!0,postData:t})}function s(t){return n({method:"POST",url:"/Api/Mobile/verify_code",isForm:!0,postData:t})}function u(t){return n({method:"POST",url:"/Api/WxWeb/is_login",isForm:!0,postData:t})}},f60e:function(t,i,e){var o=e("24fb");i=o(!1),i.push([t.i,'uni-page-body[data-v-51f6cfa8]{background-color:#fff}.tui-bg-box[data-v-51f6cfa8]{width:100%;box-sizing:border-box;position:relative;padding-top:%?44?%}.tui-photo[data-v-51f6cfa8]{height:%?138?%;width:%?138?%;display:block;margin:%?10?% auto 0 auto;border-radius:50%;position:relative;z-index:2}.tui-login-name[data-v-51f6cfa8]{width:%?200?%;height:%?40?%;font-size:%?30?%;color:#fff;margin:%?36?% auto 0 auto;text-align:center;position:relative;z-index:2}.tui-bg-img[data-v-51f6cfa8]{width:100%;height:%?346?%;display:block;position:absolute;top:0}.tui-login-from[data-v-51f6cfa8]{width:100%;padding:%?128?% %?104?% 0 %?104?%;box-sizing:border-box}.tui-input[data-v-51f6cfa8]{font-size:%?32?%;flex:1;display:inline-block;padding-left:%?32?%;box-sizing:border-box;overflow:hidden}.tui-line-cell[data-v-51f6cfa8]{padding:%?27?% 0;display:-webkit-flex;display:flex;-webkiit-align-items:center;align-items:center;position:relative;box-sizing:border-box;overflow:hidden}.tui-line-cell[data-v-51f6cfa8]::after{content:"";position:absolute;border-bottom:%?1?% solid #e0e0e0;-webkit-transform:scaleY(.5);transform:scaleY(.5);bottom:0;right:0;left:0}.tui-top28[data-v-51f6cfa8]{margin-top:%?28?%}.tui-btn-class[data-v-51f6cfa8]{width:%?196?%!important;height:%?54?%!important;border-radius:%?27?%!important;font-size:%?28?%!important;padding:0!important;line-height:%?54?%!important}.tui-btn-submit[data-v-51f6cfa8]{margin-top:%?100?%}.tui-protocol[data-v-51f6cfa8]{color:#333;font-size:%?24?%;text-align:center;width:100%;margin-top:%?29?%}.tui-protocol-red[data-v-51f6cfa8]{color:#f54f46}.header[data-v-51f6cfa8]{margin:%?90?% 0 %?90?% %?50?%;border-bottom:1px solid #ccc;text-align:center;width:%?650?%;height:%?300?%;line-height:%?450?%}.header uni-image[data-v-51f6cfa8]{width:%?200?%;height:%?200?%}.content[data-v-51f6cfa8]{margin-left:%?50?%;margin-bottom:%?90?%}.content uni-text[data-v-51f6cfa8]{display:block;color:#9d9d9d;margin-top:%?40?%}.bottom[data-v-51f6cfa8]{border-radius:%?80?%;margin:%?70?% %?50?%;font-size:%?35?%}.tui-button-primary[data-v-51f6cfa8]{background:#dc5032!important}.tui-primary-outline[data-v-51f6cfa8]::after{border:1px solid #dc5032!important}.tui-primary-outline[data-v-51f6cfa8]{color:#dc5032!important}body.?%PAGE?%[data-v-51f6cfa8]{background-color:#fff}',""]),t.exports=i}}]);